<%- include('./Layouts/header') %>
<br/>
<br/>
<h1 style="color: black;">6<sup>th</sup> Sem Classroom</h1>

    <style>
    /* Custom styles for department cards */
    .department-card {
        background-color: #f0f0f0;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        margin: 10px;
        cursor: pointer;
        position: relative;
        width: calc(25% - 20px); /* Adjust width to fit 4 cards per row */
        height: 200px; /* Set a fixed height for equal size */
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }

    .department-card:hover {
        transform: translateY(-5px);
    }

    .department-card img {
        width: 100%;
        height: auto;
        object-fit: cover;
        border-top-left-radius: 8px;
        border-top-right-radius: 8px;
        flex-grow: 1;
    }

    .department-card-footer {
        padding: 10px;
        /* background-color: #007bff; */
        color: grey; /* Changed text color to grey */
        font-weight: bold;
        text-align: center;
        border-bottom-left-radius: 8px;
        border-bottom-right-radius: 8px;
    }

    /* Gradient overlay animation */
    .gradient-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(45deg, rgba(0, 123, 255, 0.5), rgba(0, 255, 123, 0.5));
        opacity: 0;
        transition: opacity 0.3s ease;
        border-radius: 8px;
        pointer-events: none; /* Ensure clicks pass through to card */
    }

    .department-card.clicked .gradient-overlay {
        opacity: 1;
    }

    .departments-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-around;
    }
    </style>

<div class="file-container">
    <!-- Search Bar -->

    <input type="text" id="searchBar" class="search-bar" placeholder="Search by subject name..." onkeyup="filterDepartments(event)" >

    <div id="departmentsContainer" class="departments-container">
        <% let counter = 1; %>
        <% users.forEach(user => { %>
            <% if (user.role !== 'ADMIN') { %> <!-- Exclude users with the role 'ADMIN' -->
                <div class="department-card" onclick="handleCardClick(this, '<%= user._id %>')">
                    <!-- <img src="<%= user.image %>" alt="Department Image"> -->
                    <% 
                        let imageName;
                        switch (user.department) {
                            case 'Cloud Computing':
                                imageName = 'cloud.jpg';
                                break;
                            case 'Statistical Interference for Data Science':
                                imageName = 'stats.jpg';
                                break;
                            case 'Big Data Analytics':
                                imageName = 'bda.jpg';
                                break;
                            case 'Big Data Analytics Lab':
                                imageName = 'bdal.jpg';
                                break;
                            case 'Mini Project':
                                imageName = 'mini_pro.jpg';
                                break;
                            case 'Internship':
                                imageName = 'internship.jpg';
                                break;
                            case 'Digital Image Analytics':
                                imageName = 'dip.jpg';
                                break;
                            case 'Open Elective Environmental Protection and Management':
                                imageName = 'env1.jpg';
                                break;
                            default:
                                imageName = 'logo-ncet.png'; // Default image for unspecified departments
                        }
                    %>
                    <img src="/images/<%= imageName %>" alt="<%= user.department %> Image">
                    <div class="department-card-footer">
                        <%= user.department %>
                    </div>
                    <div class="gradient-overlay"></div> <!-- Gradient overlay -->
                </div>
                <% if (counter % 4 === 0) { %> <!-- Check if 4 departments in a row -->
                    <br> <!-- Add a line break after every 4 departments -->
                <% } %>
                <% counter++; %> <!-- Increment the counter -->
            <% } %>
        <% }) %>
    </div>
</div>

<script>
    function filterDepartments(event) {
        var input = document.getElementById('searchBar');
        var filter = input.value.toLowerCase();
        var departmentsContainer = document.getElementById('departmentsContainer');
        var cards = departmentsContainer.getElementsByClassName('department-card');

        for (var i = 0; i < cards.length; i++) {
            var departmentName = cards[i].querySelector('.department-card-footer').textContent.toLowerCase();
            if (departmentName.indexOf(filter) > -1) {
                cards[i].style.display = "";
            } else {
                cards[i].style.display = "none";
            }
        }
    }

    function handleCardClick(cardElement, userId) {
        // Add clicked class to animate gradient overlay
        cardElement.classList.add('clicked');
        setTimeout(() => {
            window.location.href = '/user/profile/' + userId;
        }, 300); // Adjust delay to match transition duration
    }
</script>

<%- include('./Layouts/footer') %>